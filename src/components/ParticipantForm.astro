---
// filepath: src/components/ParticipantForm.astro
---

<form id="participant-form" class="space-y-4">
  <div>
    <label for="participantName" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="user" class="w-4 h-4"></i>
      Full Name *
    </label>
    <div class="relative">
      <input
        type="text"
        id="participantName"
        placeholder="e.g., Juan Dela Cruz"
        value="Ken Garcia"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="user-circle" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="participantEmail" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="mail" class="w-4 h-4"></i>
      Email Address *
    </label>
    <div class="relative">
      <input
        type="email"
        id="participantEmail"
        placeholder="e.g., jdelacruz.a12345678@umak.edu.ph"
        value="kenpatrickgarcia123@gmail.com"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="at-sign" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="category" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="tag" class="w-4 h-4"></i>
      Category *
    </label>
    <div class="relative">
      <input
        type="text"
        id="category"
        placeholder="e.g., Student, Faculty, Staff"
        value="Student"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="badge" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="seminarTitle" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="book-open" class="w-4 h-4"></i>
      Seminar Title *
    </label>
    <div class="relative">
      <textarea
        id="seminarTitle"
        rows="2"
        placeholder="e.g., Cybersecurity Fundamentals"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
        required
      >Mobile App Security</textarea>
      <i data-lucide="presentation" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="eventDate" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="calendar" class="w-4 h-4"></i>
      Event Date *
    </label>
    <div class="relative">
      <input
        type="text"
        id="eventDate"
        placeholder="e.g., October 18, 2025"
        value="November 15, 2025"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="calendar-days" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="location" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="map-pin" class="w-4 h-4"></i>
      Location *
    </label>
    <div class="relative">
      <input
        type="text"
        id="location"
        placeholder="e.g., HPSB 1012, University of Makati"
        value="HPSB 1012"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="map" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="deanName" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="award" class="w-4 h-4"></i>
      Dean Name *
    </label>
    <div class="relative">
      <input
        type="text"
        id="deanName"
        placeholder="e.g., Prof. Levi B. Mangaba, DT"
        value="Dr. Joel B. Mangaba, DIT"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="briefcase" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>

  <div>
    <label for="organizerName" class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
      <i data-lucide="user-check" class="w-4 h-4"></i>
      Organizer Name *
    </label>
    <div class="relative">
      <input
        type="text"
        id="organizerName"
        placeholder="e.g., Prof. Cecille E. Tadeo, Ph. D."
        value="Dr. Cecille E. Tadeo, Ph. D."
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        required
      />
      <i data-lucide="clipboard-check" class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"></i>
    </div>
  </div>
</form>

<script>
  // Extend Window interface for custom function
  declare global {
    interface Window {
      updateCertificatePreview?: (formData: any) => void;
    }
  }

  // Initialize Lucide icons after form loads
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });

  // Auto-update certificate preview when form changes
  const form = document.getElementById('participant-form');
  if (form) {
    const inputs = form.querySelectorAll('input, textarea');
    inputs.forEach(input => {
      input.addEventListener('input', () => {
        // Trigger preview update
        if (typeof window.updateCertificatePreview === 'function') {
          const formData = {
            name: (document.getElementById('participantName') as HTMLInputElement)?.value || '',
            email: (document.getElementById('participantEmail') as HTMLInputElement)?.value || '',
            category: (document.getElementById('category') as HTMLInputElement)?.value || '',
            seminarTitle: (document.getElementById('seminarTitle') as HTMLTextAreaElement)?.value || '',
            eventDate: (document.getElementById('eventDate') as HTMLInputElement)?.value || '',
            location: (document.getElementById('location') as HTMLInputElement)?.value || '',
            deanName: (document.getElementById('deanName') as HTMLInputElement)?.value || '',
            organizerName: (document.getElementById('organizerName') as HTMLInputElement)?.value || ''
          };
          window.updateCertificatePreview(formData);
        }
      });
    });
  }
</script>