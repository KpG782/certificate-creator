---
// filepath: c:\Users\Ken\Desktop\`KEN\`JESSAN\certificate-creator\src\components\SignatureUploader.astro
---

<div class="bg-white rounded-xl shadow-lg p-6">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6">üìù E-Signatures & Logos</h2>
  
  <div class="space-y-6">
    <!-- Logo Uploads -->
    <div class="border-b pb-4">
      <h3 class="text-lg font-semibold text-gray-700 mb-3">Institution Logos</h3>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Left Logo (University)</label>
          <input type="file" id="left-logo-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Right Logo (College)</label>
          <input type="file" id="right-logo-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
        </div>
      </div>
    </div>

    <!-- Signature Uploads -->
    <div>
      <h3 class="text-lg font-semibold text-gray-700 mb-3">Signatures</h3>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Dean Signature</label>
          <input type="file" id="dean-signature" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Organizer Signature</label>
          <input type="file" id="organizer-signature" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  let leftLogoData: string | null = null;
  let rightLogoData: string | null = null;

  // Left Logo Upload
  const leftLogoInput = document.getElementById('left-logo-upload') as HTMLInputElement;
  if (leftLogoInput) {
    leftLogoInput.addEventListener('change', function(e) {
      const file = (e.target as HTMLInputElement).files?.[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
          leftLogoData = event.target?.result as string;
          const preview = document.getElementById('left-logo-preview') as HTMLDivElement;
          if (preview) {
            preview.innerHTML = '';
            const img = document.createElement('img');
            img.src = leftLogoData;
            img.className = 'w-28 h-28 object-contain';
            preview.appendChild(img);
          }
        };
        reader.readAsDataURL(file);
      }
    });
  }

  // Right Logo Upload
  const rightLogoInput = document.getElementById('right-logo-upload') as HTMLInputElement;
  if (rightLogoInput) {
    rightLogoInput.addEventListener('change', function(e) {
      const file = (e.target as HTMLInputElement).files?.[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
          rightLogoData = event.target?.result as string;
          const preview = document.getElementById('right-logo-preview') as HTMLDivElement;
          if (preview) {
            preview.innerHTML = '';
            const img = document.createElement('img');
            img.src = rightLogoData;
            img.className = 'w-28 h-28 object-contain';
            preview.appendChild(img);
          }
        };
        reader.readAsDataURL(file);
      }
    });
  }
</script>